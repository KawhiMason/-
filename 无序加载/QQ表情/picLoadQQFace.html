<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>图片预加载-QQ表情</title>
<link rel="stylesheet" type="text/css" href="picLoadQQFace.css">
</head>
<body>
	<div class="box">
		<a href="javascript:;" id="face-btn">表情</a>
		<div class="panel">
			<p class="loading">表情加载中，请稍后...</p>
			<!-- <ul class="list">
				<li><img src="img/00.gif" alt=""></li>
				<li><img src="img/01.gif" alt=""></li>
				<li><img src="img/02.gif" alt=""></li>
				<li><img src="img/03.gif" alt=""></li>
				<li><img src="img/04.gif" alt=""></li>
				<li><img src="img/05.gif" alt=""></li>
				<li><img src="img/06.gif" alt=""></li>
				<li><img src="img/07.gif" alt=""></li>
				<li><img src="img/08.gif" alt=""></li>
				<li><img src="img/09.gif" alt=""></li>
				<li><img src="img/10.gif" alt=""></li>
				<li><img src="img/11.gif" alt=""></li>
				<li><img src="img/12.gif" alt=""></li>
				<li><img src="img/13.gif" alt=""></li>
			</ul> -->
		</div>
		
	</div>
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/pictureLoad.js"></script>
<script type="text/javascript">
	var $btn= $('#face-btn'),
		$panel = $('.panel');

	var imgs = [];

	for (var i = 0;i<14;i++){
		imgs[i]  = 'img/' + (i+1) + '.gif'
	}
	
	var len= imgs.length;
	$btn.on('click',function(e){
		e.stopPropagation();  //阻止事件冒泡
		$panel.show();

		$.preLoad(imgs,{
			 all:function(){
			 	var html = '';

			 	html +='<ul class="list">';

			 	for(var i = 0;i <len; i++){
			 		html += '<li><img src="'+ imgs[i] + '" alt=""></li>';
			 	}

			 	html +="</ul>";

			 	setTimeout(function(){
			 		$panel.html(html);
			 	},1000);
			 }
		})
	});

	$(document).on('click',function(){
		$panel.hide();
	})
</script>
</body>
</html>